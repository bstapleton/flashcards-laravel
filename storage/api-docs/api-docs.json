{
    "openapi": "3.0.0",
    "info": {
        "title": "Flashcards API",
        "version": "1.0.0"
    },
    "paths": {
        "/api/answers": {
            "post": {
                "tags": [
                    "answer"
                ],
                "summary": "Create an answer",
                "operationId": "a1aa30cc6ce16b56a43129192929677d",
                "parameters": [
                    {
                        "name": "flashcardId",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "text": {
                                        "type": "string"
                                    },
                                    "explanation": {
                                        "type": "string"
                                    },
                                    "is_correct": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Flashcard not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/answers/{id}": {
            "get": {
                "tags": [
                    "answer"
                ],
                "summary": "Get an answer",
                "operationId": "9fbab7e05c455ae2d2b0f94968eef7e3",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Answer not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "answer"
                ],
                "summary": "Delete an answer",
                "operationId": "e173b1afc518f767162047993b50f321",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No content"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "answer"
                ],
                "summary": "Update an answer",
                "operationId": "550bfb18c699b6a03daccdbfce7eed6b",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "text": {
                                        "type": "string"
                                    },
                                    "explanation": {
                                        "type": "string"
                                    },
                                    "is_correct": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attempt": {
            "get": {
                "tags": [
                    "attempt"
                ],
                "summary": "List attempts",
                "description": "Return all attempts for the current user, paginated",
                "operationId": "17be1018f13f02dc5c6e77cafd33d828",
                "parameters": [
                    {
                        "name": "tags",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attempt/{attempt}": {
            "get": {
                "tags": [
                    "attempt"
                ],
                "summary": "Show an attempt",
                "description": "Return an attempt",
                "operationId": "bd6cf621af769869be0ea6f721f853f0",
                "parameters": [
                    {
                        "name": "attempt",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "List all active flashcards",
                "description": "Return all flashcards that are not in the graveyard, for the current user, paginated",
                "operationId": "745e7a92242380cb67d3cd373765f022",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Create flashcard",
                "operationId": "daad21d01dc5de91b535ea881fb18b52",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "text"
                                ],
                                "properties": {
                                    "text": {
                                        "type": "string",
                                        "example": "What colour is the sky?"
                                    },
                                    "is_true": {
                                        "type": "boolean"
                                    },
                                    "explanation": {
                                        "type": "string"
                                    },
                                    "answers": {
                                        "type": "array",
                                        "items": {
                                            "$ref": "#/components/schemas/Answer"
                                        }
                                    },
                                    "tags": {
                                        "type": "array",
                                        "items": {
                                            "$ref": "#/components/schemas/Tag"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "400": {
                        "description": "Free account limitation reached"
                    },
                    "403": {
                        "description": "Not permitted"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/all": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "List all flashcards",
                "description": "Return all flashcards - alive or buried - for the current user, paginated",
                "operationId": "75ec5dcd413c0c5b3ec8308246e6092b",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/{flashcard}": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Show a flashcard",
                "operationId": "1c30177165bc2aadc62af11696df906c",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Pass an answer or set of answers to the question",
                "description": "Attempt to answer the question and be judged accordingly",
                "operationId": "299249a1cadd0d7fbe7de378ddebd0de",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "answers": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Delete flashcard",
                "operationId": "94fe4dfd3153b01a20b068e45cad6f2c",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No content"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Update flashcard",
                "operationId": "edaa84d0ded0ac32545433e408066a46",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "text": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/graveyard": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Get all flashcards currently in the graveyard",
                "description": "'Buried' flashcards are those which have been anwered correctly on the Hard difficulty",
                "operationId": "deb8deeaf8821d7046d97611188a5caf",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/random": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Get a random flashcard",
                "description": "Gets a random flashcard, regardless of difficulty or tags",
                "operationId": "17931be0302bf83341342dfd4e3ec61b",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/{flashcard}/revive": {
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Resurrect a buried flashcard",
                "description": "Revive a flashcard from the graveyard back to the easy difficulty. This will additionally remove it's hidden status if it had one.",
                "operationId": "4ad9fdbff04c4096badde7914e688b34",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/{flashcard}/hide": {
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Stop a flashcard from showing up when drawing a random question to answer",
                "description": "Hide a flashcard from the pool, even if it's eligible",
                "operationId": "5a6d29d897648f83233390afeb50925d",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "400": {
                        "description": "Cannot change status"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/{flashcard}/unhide": {
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Allow the flashcard to be drawn again when drawing a random question to answer",
                "description": "Re-enable a flashcard for eligibility to be drawn from the pool",
                "operationId": "7630452a80f589efe4f6a834390456b8",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "400": {
                        "description": "Cannot change status"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/drafts": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Get all flashcards that are missing some data that stops them from being published",
                "operationId": "9ccc188473a75f86a4d693f02ba02f47",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/hidden": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Get all flashcards that have been hidden by the user",
                "operationId": "f2a70c48c295ea6ebd33070490192992",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/suggest": {
            "get": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Suggest a question based on the type and topic",
                "operationId": "1f388a915a72d21533a76f738d2e4725",
                "parameters": [
                    {
                        "name": "statement",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "topic",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Not permitted"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/flashcards/import": {
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Import flashcards",
                "operationId": "b7e417d313fdfc5a68ce5f70814451eb",
                "parameters": [
                    {
                        "name": "topic",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "401": {
                        "description": "Not authenticated"
                    },
                    "404": {
                        "description": "Import file not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/flashcards/{flashcard}/tags/{tag}": {
            "post": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Attach a tag to a flashcard",
                "description": "Attach a tag",
                "operationId": "6ccef4256e554333866e9caeec0d8e92",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "tag",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "flashcard"
                ],
                "summary": "Detach a tag",
                "description": "Detach a tag from a flashcard",
                "operationId": "4aa1cfd0e7806637ef415f2125731791",
                "parameters": [
                    {
                        "name": "flashcard",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "tag",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Model not found"
                    },
                    "403": {
                        "description": "Not permitted"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/login": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Authenticate user and generate JWT token",
                "operationId": "c5e838284c7f343f0e5e5fd589161c96",
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                },
                "security": [
                    {
                        "basicAuth": []
                    }
                ]
            }
        },
        "/api/tags": {
            "get": {
                "tags": [
                    "tag"
                ],
                "summary": "List tags",
                "operationId": "4d0f4baf9e6fa992c0d85fbf140ebf17",
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "tag"
                ],
                "summary": "Create a tag",
                "operationId": "a0a246f29dcb119a2189fd230fc10028",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "colour"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Mathematics"
                                    },
                                    "colour": {
                                        "type": "string",
                                        "example": "green"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tags/{tag}": {
            "put": {
                "tags": [
                    "tag"
                ],
                "summary": "Update a tag",
                "operationId": "41b49eb4f2a830e150f50252f4d831b8",
                "parameters": [
                    {
                        "name": "tag",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "colour"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Mathematics"
                                    },
                                    "colour": {
                                        "type": "string",
                                        "example": "green"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "404": {
                        "description": "Tag not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tags/{id}": {
            "delete": {
                "tags": [
                    "tag"
                ],
                "summary": "Delete a tag",
                "operationId": "6f092682e8bbdea016bb928c862fc3e4",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "No content"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/register": {
            "post": {
                "tags": [
                    "auth"
                ],
                "summary": "Register a new user",
                "operationId": "2f25885f3b6f61ca11724ec302d2e439",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "username",
                                    "password",
                                    "password_confirmation",
                                    "display_name"
                                ],
                                "properties": {
                                    "username": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "password"
                                    },
                                    "password_confirmation": {
                                        "type": "password"
                                    },
                                    "display_name": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User registered successfully"
                    },
                    "422": {
                        "description": "Validation errors"
                    }
                }
            }
        },
        "/api/user/{user}": {
            "get": {
                "tags": [
                    "auth"
                ],
                "summary": "Get logged-in user details",
                "operationId": "a0fa3a08f20fb611866a52d1bb2e43dd",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "401": {
                        "description": "Unauthorised"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/user/count_questions": {
            "get": {
                "tags": [
                    "auth"
                ],
                "summary": "Get the number of flashcards the user has made",
                "operationId": "874ea29ca38e0d32e5988e5387fb57a9",
                "responses": {
                    "200": {
                        "description": "Success"
                    },
                    "401": {
                        "description": "Unauthorised"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "Answer": {
                "required": [
                    "text"
                ],
                "properties": {
                    "flashcard_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "text": {
                        "type": "string",
                        "example": "Blue"
                    },
                    "explanation": {
                        "type": "string",
                        "example": "Blue is the colour of the sky"
                    },
                    "is_correct": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "description": "Initial creation timestamp",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": "true"
                    },
                    "updated_at": {
                        "description": "Last update timestamp",
                        "type": "string",
                        "format": "date-time",
                        "readOnly": "true"
                    }
                },
                "type": "object"
            },
            "Flashcard": {
                "required": [
                    "text"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "text": {
                        "type": "string"
                    },
                    "difficulty": {
                        "type": "string"
                    },
                    "is_true": {
                        "type": "boolean"
                    },
                    "explanation": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string"
                    },
                    "eligible_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "last_seen_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "Tag": {
                "required": [
                    "name",
                    "colour"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Mathematics"
                    },
                    "colour": {
                        "type": "string",
                        "example": "green"
                    }
                },
                "type": "object"
            },
            "User": {
                "required": [
                    "username",
                    "password",
                    "display_name"
                ],
                "properties": {
                    "username": {
                        "type": "string"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "password": {
                        "type": "password"
                    },
                    "points": {
                        "type": "number"
                    },
                    "easy_time": {
                        "type": "number"
                    },
                    "medium_time": {
                        "type": "number"
                    },
                    "page_limit": {
                        "type": "number"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "answer",
            "description": "answer"
        },
        {
            "name": "attempt",
            "description": "attempt"
        },
        {
            "name": "flashcard",
            "description": "flashcard"
        },
        {
            "name": "auth",
            "description": "auth"
        },
        {
            "name": "tag",
            "description": "tag"
        }
    ]
}